<?php

/**     
 * The technical support is guaranteed for all modules proposed by Wyomind.
 * The below code is obfuscated in order to protect the module's copyright as well as the integrity of the license and of the source code.
 * The support cannot apply if modifications have been made to the original source code (https://www.wyomind.com/terms-and-conditions.html).
 * Nonetheless, Wyomind remains available to answer any question you might have and find the solutions adapted to your needs.
 * Feel free to contact our technical team from your Wyomind account in My account > My tickets. 
 * Copyright Â© 2019 Wyomind. All rights reserved.
 * See LICENSE.txt for license details.
 */
  class Wyomind_Elasticsearch_Helper_Indexer_Category extends Wyomind_Elasticsearch_Helper_Indexer_Abstract {public $xba=null;public $xfa=null;public $x2d=null;  protected $_searchableAttributes;  protected $_categoriesWithPathNames = array();  protected $_blockClass = 'Wyomind_Elasticsearch_Block_Autocomplete_Category';  private $x367b = null; public $error = "E\154\141s\x74ic\x73\145\141\x72\143\150 C\x61\164\x65g\157\x72\171\x20\111\156\x64e\x78\40\72\40\111\x6ev\x61\154id\40\114\151\143en\163\145\x21"; public function __construct() {$x4b3a = "\x68el\160e\162";$x4ed7 = "a\x70\x70";$x4efa = "g\x65\x74\115odel";$x4d46 = "ge\164\122es\x6f\x75\162c\x65\x4d\157\x64\x65\154";$x4e58 = "\x64i\x73\160\141\164c\x68E\x76\145\156t"; $this->_construct(); } public function _construct() {$x4b3a = "\x68\145\154\x70e\x72";$x4ed7 = "ap\x70";$x4efa = "\x67\x65\x74\x4d\157d\145l";$x4d46 = "\x67\145\164\x52\x65sou\x72\143\x65\115ode\x6c";$x4e58 = "\144i\x73\160atch\x45ve\156\164"; $this->x367b = Mage::helper("\x6c\x69ce\156se\155an\141\x67e\x72\x2fda\164\x61"); $this->x367b->constructor($this, func_get_args()); }  public function export($x34b7 = array()) {$x3486 = $this->xfa->x3671->{$this->xba->x3671->{$this->x2d->x3671->x49d7}};$x3474 = $this->x2d->x3662->x41c8;$x34ab = $this->x2d->x3671->{$this->xba->x3671->x49ef};$x34b3 = $this->xfa->x3662->{$this->xba->x3662->{$this->xfa->x3662->{$this->xba->x3662->x41e9}}};$x3508 = $this->xba->x3647->x396c;$xa4b = $this->x2d->x3662->x41fe;$x101d = $this->xfa->x3662->{$this->x2d->x3662->x420d};$xaf9 = $this->xfa->x3647->{$this->xfa->x3647->x3990};$xe29 = $this->x2d->x3662->x422b;$xb77 = $this->x2d->x3662->{$this->x2d->x3662->x4239};$xba8 = $this->xba->x3671->x4a65;$xc65 = $this->xba->x3647->x39cb;$xde0 = $this->xfa->x3671->x4a7f;$xe24 = $this->xba->x3671->{$this->x2d->x3671->x4a91};$xe8c = $this->xfa->x3671->x4a9d;$x1032 = $this->x2d->x3662->x4270;$x4b3a = "\150e\154p\145\x72";$x4ed7 = "\141\160\x70";$x4efa = "\147et\115\x6f\x64\145\154";$x4d46 = "ge\164\x52\145sou\162c\145\x4d\157de\x6c";$x4e58 = "\x64is\160\x61\164ch\x45v\x65\x6et"; try { ${$this->x2d->x3671->x47c1} = $this; ${$this->x2d->x3662->{$this->x2d->x3662->x3faa}} = "M\141\x67e"; ${$this->xfa->x3647->x3709} = "h\145l\x70\145\162"; ${$this->xfa->x3662->{$this->x2d->x3662->x3fbd}} = "t\x68\x72\x6f\167Exc\x65\x70ti\x6f\156"; ${$this->x2d->x3671->{$this->xfa->x3671->x47f3}} = $x3486($x3474()); ${$this->x2d->x3662->{$this->x2d->x3662->{$this->xfa->x3662->x3fa2}}}->{$this->xba->x3647->{$this->xfa->x3647->x367f}}->{$this->x2d->x3647->x3a82}(${$this->x2d->x3662->{$this->x2d->x3662->{$this->xba->x3662->{$this->x2d->x3662->x3fa4}}}}, ${$this->xfa->x3647->x3727}); if (${$this->x2d->x3671->{$this->xba->x3671->{$this->xba->x3671->{$this->x2d->x3671->{$this->x2d->x3671->x47cd}}}}}->{$this->xfa->x3647->x3a9b}(${$this->xfa->x3647->{$this->x2d->x3647->x3728}}) != $x3486(${$this->xfa->x3647->{$this->x2d->x3647->x3728}})) { ${$this->x2d->x3671->{$this->xba->x3671->x47d2}}::${$this->xfa->x3647->{$this->xfa->x3647->x371f}}(${$this->xfa->x3647->x36f7}::${$this->xba->x3671->x47d4}("\x65\154a\163ticse\x61rc\x68")->{$this->x2d->x3647->x3aa8}(${$this->x2d->x3671->{$this->xba->x3671->{$this->xba->x3671->{$this->x2d->x3671->x47ca}}}}->{$this->xba->x3647->{$this->xba->x3647->{$this->xfa->x3647->{$this->xba->x3647->x368f}}}})); } ${$this->xba->x3671->{$this->x2d->x3671->{$this->xba->x3671->{$this->xba->x3671->x4800}}}} = array(); ${$this->xba->x3662->{$this->x2d->x3662->{$this->x2d->x3662->{$this->xba->x3662->x3fea}}}} = Mage::$x4ed7()->{$this->xba->x3647->x3abd}(); foreach (Mage::$x4ed7()->{$this->x2d->x3647->x3add}() as ${$this->x2d->x3647->x3754}) {  if (!${$this->x2d->x3647->{$this->xfa->x3647->{$this->xfa->x3647->{$this->xba->x3647->x375c}}}}->{$this->xba->x3647->x3aeb}()) { continue; } Mage::$x4ed7()->{$this->xfa->x3647->x3b04}(${$this->x2d->x3662->{$this->xba->x3662->x3fef}}); ${$this->xba->x3662->{$this->x2d->x3662->x3ff5}} = (int) ${$this->x2d->x3671->x4812}->{$this->x2d->x3647->x3b0b}(); if (isset(${$this->x2d->x3647->x36ea}['store_id'])) { if (!$x34ab(${$this->xba->x3662->x3f97}['store_id'])) { ${$this->x2d->x3662->{$this->xfa->x3662->{$this->x2d->x3662->x3f9a}}}['store_id'] = array(${$this->x2d->x3647->{$this->x2d->x3647->x36ed}}['store_id']); } if (!$x34b3(${$this->xba->x3662->{$this->x2d->x3662->{$this->x2d->x3662->{$this->xfa->x3662->x3ff9}}}}, ${$this->x2d->x3662->{$this->xba->x3662->x3f98}}['store_id'])) { continue; } } $this->{$this->xfa->x3647->x3b14}(' > Exporting categories of store %s', ${$this->x2d->x3647->{$this->xfa->x3647->{$this->xfa->x3647->{$this->xba->x3647->x375c}}}}->{$this->xba->x3647->x3b1c}()); ${$this->xba->x3671->x47f8}[${$this->x2d->x3647->{$this->xfa->x3647->x3761}}] = array();  ${$this->xfa->x3662->{$this->xba->x3662->{$this->x2d->x3662->x4003}}} = $this->{$this->xba->x3647->x3b24}('category', ${$this->x2d->x3647->x3754}); ${$this->xba->x3647->{$this->xba->x3647->x3774}} = Mage::$x4efa('catalog/category')->{$this->x2d->x3647->x3b39}(); ${$this->xba->x3671->{$this->x2d->x3671->x4835}}->{$this->xfa->x3647->x3b44}(${$this->xba->x3671->{$this->xba->x3671->x4814}}->{$this->x2d->x3647->x3b0b}()); ${$this->xfa->x3671->{$this->x2d->x3671->{$this->x2d->x3671->x483e}}} = ${$this->x2d->x3662->{$this->xba->x3662->x3fef}}->{$this->xfa->x3647->x3b5b}(); ${$this->xba->x3671->x4830}->{$this->xfa->x3647->x3b64}() ->{$this->x2d->x3647->x3b77}(${$this->x2d->x3671->{$this->xfa->x3671->{$this->xba->x3671->{$this->xba->x3671->x4827}}}}) ->{$this->xba->x3647->x3b7f}('path', array('like' => "1/{${$this->xfa->x3671->{$this->x2d->x3671->x483a}}}/%")) ->{$this->xba->x3647->x3b7f}('include_in_menu', array('eq' => 1)); ${$this->xfa->x3662->{$this->x2d->x3662->x400e}}->{$this->x2d->x3647->x3b9d}(); foreach (${$this->xfa->x3662->{$this->x2d->x3662->x400e}} as ${$this->x2d->x3647->x378b}) { ${$this->xba->x3662->{$this->xba->x3662->{$this->xba->x3662->x401e}}}->{$this->xba->x3647->x3bb0}()->{$this->x2d->x3647->x3bc5}(${$this->x2d->x3647->{$this->xfa->x3647->{$this->xfa->x3647->{$this->xba->x3647->x375c}}}}); ${$this->xba->x3671->{$this->x2d->x3671->{$this->xba->x3671->{$this->x2d->x3671->{$this->xfa->x3671->x4804}}}}}[${$this->x2d->x3647->x3760}][${$this->xba->x3662->{$this->xba->x3662->{$this->xba->x3662->x401e}}}->{$this->x2d->x3647->x3b0b}()] = $x3508( array( 'id' => ${$this->xfa->x3662->x4019}->{$this->x2d->x3647->x3b0b}(), '_url' => ${$this->xfa->x3671->x483f}->{$this->xba->x3647->x3bf2}(), '_path' => $this->{$this->xba->x3671->{$this->xfa->x3671->x49ba}}(${$this->xba->x3671->{$this->x2d->x3671->{$this->xba->x3671->{$this->xfa->x3671->{$this->xba->x3671->x4847}}}}}), ), ${$this->xba->x3671->{$this->xba->x3671->x4841}}->{$this->x2d->x3647->x3c07}(${$this->x2d->x3647->{$this->x2d->x3647->{$this->xfa->x3647->x376b}}}) ); } $this->{$this->xfa->x3647->x3b14}(' > Categories exported'); } Mage::$x4ed7()->{$this->xfa->x3647->x3b04}(${$this->xba->x3662->{$this->x2d->x3662->{$this->x2d->x3662->{$this->xba->x3662->x3fea}}}}); return ${$this->xba->x3671->{$this->x2d->x3671->{$this->xba->x3671->{$this->x2d->x3671->{$this->xfa->x3671->x4804}}}}}; } catch (Exception $e) { throw $e; } }  public function getSearchableAttributes($x3530 = null) {$x1108 = $this->xfa->x3671->x4b0f;$x4b3a = "\x68\145\154\160e\162";$x4ed7 = "\141p\x70";$x4efa = "\147\x65\x74\115\x6fd\x65\x6c";$x4d46 = "\x67\145\x74\x52e\163ou\x72\143eM\157d\x65l";$x4e58 = "\x64\151s\160\x61\164chEv\x65n\164"; if (null === $this->{$this->xba->x3647->{$this->x2d->x3647->x369c}}) { $this->{$this->xfa->x3647->{$this->xba->x3647->x36be}} = array(); ${$this->xfa->x3671->{$this->xfa->x3671->x48eb}} = $this->{$this->x2d->x3647->x3c3c}()->{$this->xba->x3647->x3c41}('catalog_category'); ${$this->xfa->x3671->x48f4} = ${$this->x2d->x3647->x383e}->{$this->x2d->x3647->x3c4e}();  ${$this->x2d->x3671->{$this->x2d->x3671->x48fe}} = Mage::$x4d46('catalog/category_attribute_collection') ->{$this->x2d->x3647->x3c65}(${$this->xfa->x3671->{$this->xba->x3671->{$this->xba->x3671->x48f0}}}->{$this->x2d->x3647->x3c71}()) ->{$this->xba->x3647->x3c82}('attribute_code', array( 'in' => $this->{$this->xba->x3647->x3b24}('category', ${$this->xba->x3662->x40a2}) )); ${$this->xba->x3671->{$this->xba->x3671->x4908}} = ${$this->xba->x3662->{$this->x2d->x3662->{$this->xba->x3662->x40c4}}}->{$this->x2d->x3647->x3c9e}(); foreach (${$this->xfa->x3671->x4903} as ${$this->x2d->x3662->{$this->xba->x3662->x40d2}}) {  ${$this->x2d->x3662->{$this->xba->x3662->x40d2}}->{$this->xba->x3647->x3caa}(${$this->xfa->x3662->{$this->xba->x3662->{$this->xfa->x3662->{$this->xfa->x3662->x40bb}}}}); $this->{$this->xba->x3647->{$this->x2d->x3647->x369c}}[${$this->x2d->x3662->x40d1}->{$this->xba->x3647->x3cb8}()] = ${$this->xba->x3671->{$this->xfa->x3671->x4910}}; } } return $this->{$this->xba->x3647->{$this->x2d->x3647->x369c}}; }  public function getStoreIndexProperties($x35aa = null) {$x3567 = $this->xfa->x3662->x4286;$x15b = $this->xba->x3662->x4291;$x35b7 = $this->xfa->x3671->{$this->xba->x3671->x4af7};$x11b9 = $this->xba->x3647->x3a41;$x4b3a = "\150\x65l\160er";$x4ed7 = "\141p\x70";$x4efa = "getMod\145\x6c";$x4d46 = "\147\x65t\x52e\163\x6f\x75\162\x63\145M\x6f\144\145\154";$x4e58 = "\144i\163\x70\141\x74\x63\150E\x76\x65n\x74"; ${$this->x2d->x3671->{$this->xba->x3671->{$this->xba->x3671->x485c}}} = Mage::$x4ed7()->{$this->xba->x3647->x3abd}(${$this->x2d->x3671->{$this->xba->x3671->{$this->xfa->x3671->{$this->x2d->x3671->x485d}}}}); ${$this->xfa->x3662->{$this->x2d->x3662->x404c}} = 'elasticsearch_category_index_properties_' . ${$this->x2d->x3647->x37b1}->{$this->x2d->x3647->x3b0b}(); if (Mage::$x4ed7()->{$this->xfa->x3647->x3d0c}('config')) { ${$this->xba->x3671->{$this->xfa->x3671->x486e}} = Mage::$x4ed7()->{$this->x2d->x3647->x3d27}(${$this->xba->x3671->x4861}); if (${$this->xba->x3671->{$this->xfa->x3671->{$this->x2d->x3671->x4870}}}) { return $x3567(${$this->xba->x3662->x404e}); } } ${$this->xba->x3647->x37c6} = array(); ${$this->x2d->x3671->{$this->xba->x3671->{$this->x2d->x3671->x487c}}} = $this->{$this->xfa->x3671->{$this->xba->x3671->{$this->xba->x3671->x499f}}}(${$this->x2d->x3662->{$this->xfa->x3662->x4040}}); foreach (${$this->x2d->x3662->{$this->xba->x3662->{$this->xfa->x3662->x4062}}} as ${$this->xfa->x3671->{$this->xba->x3671->x4881}}) {  ${$this->x2d->x3662->{$this->xfa->x3662->x4080}} = ${$this->xfa->x3647->x37da}->{$this->xba->x3647->x3cb8}(); ${$this->xba->x3662->x4068}->{$this->x2d->x3647->x3d4c}(true); ${$this->xba->x3671->{$this->xfa->x3671->{$this->x2d->x3671->x4870}}}[${$this->xfa->x3662->x407c}] = $this->{$this->xfa->x3647->x3d56}(${$this->x2d->x3647->{$this->x2d->x3647->{$this->xba->x3647->x37e3}}}, ${$this->x2d->x3662->{$this->xfa->x3662->x4040}}); }  ${$this->xfa->x3662->{$this->xfa->x3662->{$this->x2d->x3662->x4054}}}['_url'] = array( 'type' => 'string', 'store' => true, 'index' => 'no', );  ${$this->xfa->x3662->{$this->xfa->x3662->{$this->xba->x3662->{$this->x2d->x3662->{$this->xba->x3662->x4057}}}}}['_path'] = array( 'type' => 'string', 'store' => true, 'index' => 'no', ); ${$this->xfa->x3662->{$this->xfa->x3662->{$this->x2d->x3662->x4054}}} = new Varien_Object(${$this->xba->x3671->{$this->xfa->x3671->{$this->x2d->x3671->x4870}}}); Mage::$x4e58('wyomind_elasticsearch_index_properties', array( 'indexer' => $this, 'store' => ${$this->x2d->x3647->{$this->x2d->x3647->x37b3}}, 'properties' => ${$this->xfa->x3662->{$this->xfa->x3662->x4053}}, )); ${$this->x2d->x3647->{$this->x2d->x3647->x37ca}} = ${$this->xba->x3662->x404e}->{$this->xfa->x3647->x3a9b}(); if (Mage::$x4ed7()->{$this->xfa->x3647->x3d0c}('config')) { ${$this->xfa->x3647->{$this->xba->x3647->{$this->xba->x3647->{$this->xba->x3647->x3805}}}} = $this->{$this->xfa->x3647->x3d96}(); Mage::$x4ed7()->{$this->xfa->x3647->x3db3}($x35b7(${$this->x2d->x3647->{$this->x2d->x3647->x37ca}}), ${$this->xba->x3647->{$this->xfa->x3647->{$this->xfa->x3647->x37bc}}}, array('config'), ${$this->xfa->x3647->{$this->xba->x3647->{$this->xfa->x3647->x3802}}}); } return ${$this->xfa->x3671->x486c}; }  public function getCategoriesWithPathNames($x360c = null) {$x35eb = $this->xfa->x3662->x42be;$x4b3a = "h\145\x6c\160\145\x72";$x4ed7 = "\x61pp";$x4efa = "g\145t\x4d\x6f\x64\145\154";$x4d46 = "g\x65\x74R\x65\163o\165rce\x4d\157\x64\x65\x6c";$x4e58 = "\144\151\163\160\141\164\x63\150Eve\x6e\x74"; ${$this->xfa->x3647->{$this->xfa->x3647->x386a}} = Mage::$x4ed7()->{$this->xba->x3647->x3abd}(${$this->xba->x3662->{$this->xfa->x3662->{$this->xfa->x3662->{$this->x2d->x3662->x40f9}}}}); if (!isset($this->{$this->xfa->x3647->{$this->xfa->x3647->x36ca}}[${$this->xfa->x3647->{$this->xfa->x3647->{$this->xba->x3647->x386f}}}->{$this->x2d->x3647->x3b0b}()])) { ${$this->xba->x3671->{$this->x2d->x3671->{$this->xfa->x3671->x4928}}} = Mage::$x4efa('catalog/category')->{$this->x2d->x3647->x3b39}() ->{$this->x2d->x3647->x3b77}('name') ->{$this->xfa->x3647->x3b64}() ->{$this->xfa->x3647->x3b44}(${$this->xba->x3662->{$this->xfa->x3662->{$this->xfa->x3662->{$this->x2d->x3662->x40f9}}}}->{$this->x2d->x3647->x3b0b}()); foreach (${$this->x2d->x3662->x40fe} as ${$this->xba->x3662->x410c}) { ${$this->xba->x3662->x410c}->{$this->xfa->x3647->x3e24}(new ArrayObject()); ${$this->xba->x3647->x3885} = $x35eb(${$this->xba->x3662->x410c}->{$this->xfa->x3647->x3e33}(), 2); if (!empty(${$this->xba->x3647->{$this->xba->x3647->x388a}})) { foreach (${$this->x2d->x3671->x4931} as ${$this->xfa->x3647->{$this->xba->x3647->{$this->xba->x3647->{$this->xba->x3647->x389e}}}}) { if (${$this->xba->x3671->{$this->xfa->x3671->x493f}} = ${$this->xba->x3647->x3873}->{$this->xba->x3647->x3e42}(${$this->xfa->x3647->{$this->xba->x3647->{$this->xba->x3647->{$this->xba->x3647->x389e}}}})) { ${$this->xfa->x3671->{$this->xfa->x3671->x492f}}->{$this->x2d->x3647->x3e4f}()->{$this->xfa->x3647->x3e63}(${$this->xba->x3647->{$this->xba->x3647->{$this->x2d->x3647->x38a8}}}->{$this->xba->x3647->x3e6d}()); } } } } $this->{$this->xfa->x3647->{$this->xba->x3647->{$this->xfa->x3647->{$this->xfa->x3647->x36ce}}}}[${$this->xba->x3662->{$this->xfa->x3662->{$this->x2d->x3662->x40f4}}}->{$this->x2d->x3647->x3b0b}()] = ${$this->xba->x3671->{$this->x2d->x3671->{$this->xfa->x3671->x4928}}}; } return $this->{$this->xfa->x3647->{$this->xba->x3647->{$this->xfa->x3647->x36cd}}}[${$this->x2d->x3647->x3868}->{$this->x2d->x3647->x3b0b}()]; }  public function getCategoryPathName(Mage_Catalog_Model_Category $x362e, $x3627 = ' > ') {$x3623 = $this->xfa->x3647->x3a62;$x4b3a = "\x68e\x6cpe\162";$x4ed7 = "\x61p\160";$x4efa = "\x67\145\x74\115\x6f\144e\154";$x4d46 = "g\145t\122\145\x73\157u\x72\x63eM\x6fde\x6c";$x4e58 = "\x64i\x73\160atc\x68\x45ve\x6e\164"; ${$this->x2d->x3647->{$this->xba->x3647->{$this->xfa->x3647->{$this->xfa->x3647->x38ca}}}} = $this->{$this->xfa->x3662->{$this->xba->x3662->{$this->xba->x3662->x4192}}}(${$this->xba->x3647->{$this->xba->x3647->{$this->xfa->x3647->x38b3}}}->{$this->xba->x3647->x3abd}()) ->{$this->xba->x3647->x3e42}(${$this->x2d->x3671->x4942}->{$this->x2d->x3647->x3b0b}()); if (${$this->x2d->x3647->{$this->xba->x3647->{$this->xfa->x3647->{$this->xfa->x3647->{$this->xba->x3647->x38cd}}}}}) { return $x3623(${$this->x2d->x3671->{$this->xfa->x3671->{$this->x2d->x3671->{$this->xba->x3671->x4950}}}}, (array) ${$this->x2d->x3647->{$this->xba->x3647->{$this->xfa->x3647->{$this->xfa->x3647->{$this->xba->x3647->x38cd}}}}}->{$this->x2d->x3647->x3e4f}()); } return ${$this->x2d->x3662->{$this->x2d->x3662->{$this->x2d->x3662->{$this->x2d->x3662->{$this->xba->x3662->x412a}}}}}->{$this->xba->x3647->x3e6d}(); } } 